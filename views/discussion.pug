each itemComment, indexReply in comments
  .row.comment
    .col.s12
      .row.identification-section
        i.small.material-icons.profile-picture account_circle
        span.name #{itemComment['userId']}
        span.likes-section
          i.small.material-icons.reply-picture reply
          span.likes-number #{itemComment['repliesCount']}  &nbsp
          i.small.material-icons.thumb-up-picture.cursor-pointer(id='like_' + itemComment['_id'], onclick='voteClickComment($(this), 1)', onmouseover='voteHover($(this), 1)', onmouseout='voteLeave($(this), 1)') thumb_up
          span.likes-number #{itemComment['likesCount']}  &nbsp
          i.small.material-icons.thumb-down-picture.cursor-pointer(id='dislike_' + itemComment['_id'], onclick='voteClickComment($(this), -1)', onmouseover='voteHover($(this), -1)', onmouseout='voteLeave($(this), -1)') thumb_down
          span.likes-number #{itemComment['dislikesCount']}
        br
        span.date=itemComment['date']

      hr.divider
      .row
        p.comment-text=itemComment['comment']
    if itemComment['replies'].length !== 0
      .col.s12
        .row
          .button.view-replies-button(id='viewReplies_' + itemComment['_id'], class='btn btn-lg btn-primary', onclick='repliesSection($(this))') View replies

    .hidden(id='replies_' + itemComment['_id'])
      each itemReply, indexReply in itemComment['replies']
        .col.s11.reply
          .row.identification-section
            i.small.material-icons.profile-picture account_circle
            span.name #{itemReply['userId']}
            span.likes-section
              i.small.material-icons.thumb-up-picture.cursor-pointer(id='like_' + itemComment['_id'] + '_' + itemReply['_id'], onclick='voteClickReply($(this), 1)', onmouseover='voteHover($(this), 1)', onmouseout='voteLeave($(this), 1)') thumb_up
              span.likes-number=itemReply['likesCount']  &nbsp
              i.small.material-icons.thumb-down-picture.cursor-pointer(id='dislike_' + itemComment['_id'] + '_' + itemReply['_id'], onclick='voteClickReply($(this), -1)', onmouseover='voteHover($(this), -1)', onmouseout='voteLeave($(this), -1)') thumb_down
              span.likes-number=itemReply['dislikesCount']
            br
            span.date=itemReply['date']
          hr.divider
          .row
            p.comment-text(id='reply_' + itemComment['_id'] + '_' + itemReply['_id'])=itemReply['reply']
      .col.s12.reply
        .row.identification-section
          i.small.material-icons.profile-picture account_circle
          span.name Firstname Lastname
        .row
          textarea.comment-box(id='replyTo_' + itemComment['_id'], placeholder='Enter a Reply...')
          .button.comment-reply-button(class='btn btn-lg btn-primary', onclick='reply("'+itemComment['_id']+'")') Reply

.row.comment
  .col.s12
    .row.identification-section
      i.small.material-icons.profile-picture account_circle
      span.name Firstname Lastname
    .row
      textarea.comment-box#commentBox(placeholder='Enter a comment...')
      .button.comment-reply-button(class='btn btn-lg btn-primary', onclick='comment()') Comment

block scripts
  script(src='/lib/jquery/jquery-3.1.1.min.js')
  script(src='/lib/caret/jquery.caret.min.js')
  script(src='/lib/atwho/jquery.atwho.min.js')
  script(src='/js/discussion.js')
